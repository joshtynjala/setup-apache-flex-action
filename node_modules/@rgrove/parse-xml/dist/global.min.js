/*! @rgrove/parse-xml v4.1.0 | ISC License | Copyright Ryan Grove */
"use strict";var parseXml=(()=>{var T=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var k=(n,t)=>{for(var e in t)T(n,e,{get:t[e],enumerable:!0})},V=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of L(t))!$.call(n,i)&&i!==e&&T(n,i,{get:()=>t[i],enumerable:!(r=R(t,i))||r.enumerable});return n};var W=n=>V(T({},"__esModule",{value:!0}),n);var Q={};k(Q,{XmlCdata:()=>d,XmlComment:()=>p,XmlDeclaration:()=>x,XmlDocument:()=>g,XmlDocumentType:()=>y,XmlElement:()=>h,XmlError:()=>b,XmlNode:()=>s,XmlProcessingInstruction:()=>f,XmlText:()=>u,parseXml:()=>z});var c="",B=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E=class{constructor(t){if(this.m=this.x(t,!0),this.i=0,this.length=t.length,this.f=this.m!==this.length,this.c=t,this.f){let e=[];for(let r=0,i=0;i<this.m;++i)e[i]=r,r+=t.codePointAt(r)>65535?2:1;this.O=e}}get T(){return this.i>=this.m}x(t,e=this.f){return e?t.replace(B,"_").length:t.length}o(t=1){this.i=Math.min(this.m,this.i+t)}a(t=this.i){var e;return this.f?(e=this.O[t])!=null?e:1/0:t}I(t=1){let e=this.l(t);return this.o(t),e}j(t){if(!t.sticky)throw new Error('`regex` must have a sticky flag ("y")');t.lastIndex=this.a();let e=t.exec(this.c);if(e===null||e.length===0)return c;let r=e[0];return this.o(this.x(r)),r}X(t){let e,r=c;for(;(e=this.l())&&t(e);)r+=e,this.o();return r}$(t){if(this.e(t))return t;if(this.f){let{length:e}=t,r=this.x(t);if(r!==e&&t===this.l(r))return this.o(r),t}return c}e(t){let{length:e}=t;return this.l(e)===t?(this.o(e),t):c}D(t){let e=this.c.slice(this.a()),r=e.search(t);if(r<=0)return c;let i=e.slice(0,r);return this.o(this.x(i)),i}b(t){let{c:e}=this,r=this.a(),i=e.indexOf(t,r);if(i<=0)return c;let o=e.slice(r,i);return this.o(this.x(o)),o}l(t=1){let{i:e,f:r,c:i}=this;return r?e>=this.m?c:i.slice(this.a(e),this.a(e+t)):i.slice(e,e+t)}d(t=0){this.i=t>=0?Math.min(this.m,t):Math.max(0,this.i+t)}};var S=/[^"&<]+/y,A=/[^'&<]+/y,M=/\r\n|[\n\r\t]/g,_=/<|&|]]>/,J=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function D(n){let t=P(n);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||t===45||t===46||t===183||t>=768&&t<=879||t>=8255&&t<=8256||C(n,t)}function C(n,t=P(n)){return t>=97&&t<=122||t>=65&&t<=90||t===58||t===95||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=767||t>=880&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function U(n){return n==="#"||D(n)}function Y(n){let t=P(n);return t===32||t===9||t===10||t===13}function N(n){return n===9||n===10||n===13||n>=32&&n<=55295||n>=57344&&n<=65533||n>=65536&&n<=1114111}function P(n){return n.codePointAt(0)||-1}var F=class{constructor(){this.parent=null;this.start=-1;this.end=-1}get document(){var t,e;return(e=(t=this.parent)==null?void 0:t.document)!=null?e:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===F.TYPE_ELEMENT}get preserveWhitespace(){var t;return!!((t=this.parent)!=null&&t.preserveWhitespace)}get type(){return""}toJSON(){let t={type:this.type};return this.isRootNode&&(t.isRootNode=!0),this.preserveWhitespace&&(t.preserveWhitespace=!0),this.start!==-1&&(t.start=this.start,t.end=this.end),t}},s=F;s.TYPE_CDATA="cdata",s.TYPE_COMMENT="comment",s.TYPE_DOCUMENT="document",s.TYPE_DOCUMENT_TYPE="doctype",s.TYPE_ELEMENT="element",s.TYPE_PROCESSING_INSTRUCTION="pi",s.TYPE_TEXT="text",s.TYPE_XML_DECLARATION="xmldecl";var u=class extends s{constructor(e=""){super();this.text=e}get type(){return s.TYPE_TEXT}toJSON(){return Object.assign(s.prototype.toJSON.call(this),{text:this.text})}};var d=class extends u{get type(){return s.TYPE_CDATA}};var p=class extends s{constructor(e=""){super();this.content=e}get type(){return s.TYPE_COMMENT}toJSON(){return Object.assign(s.prototype.toJSON.call(this),{content:this.content})}};var x=class extends s{constructor(e,r,i){super();this.version=e,this.encoding=r!=null?r:null,this.standalone=i!=null?i:null}get type(){return s.TYPE_XML_DECLARATION}toJSON(){let e=s.prototype.toJSON.call(this);e.version=this.version;for(let r of["encoding","standalone"])this[r]!==null&&(e[r]=this[r]);return e}};var h=class extends s{constructor(e,r=Object.create(null),i=[]){super();this.name=e,this.attributes=r,this.children=i}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof h;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return s.TYPE_ELEMENT}toJSON(){return Object.assign(s.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}};var g=class extends s{constructor(e=[]){super();this.children=e}get document(){return this}get root(){for(let e of this.children)if(e instanceof h)return e;return null}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return s.TYPE_DOCUMENT}toJSON(){return Object.assign(s.prototype.toJSON.call(this),{children:this.children.map(e=>e.toJSON())})}};var y=class extends s{constructor(e,r,i,o){super();this.name=e,this.publicId=r!=null?r:null,this.systemId=i!=null?i:null,this.internalSubset=o!=null?o:null}get type(){return s.TYPE_DOCUMENT_TYPE}toJSON(){let e=s.prototype.toJSON.call(this);e.name=this.name;for(let r of["publicId","systemId","internalSubset"])this[r]!==null&&(e[r]=this[r]);return e}};var b=class extends Error{constructor(e,r,i){let o=1,l="",a=1;for(let O=0;O<r;++O){let j=i[O];j===`
`?(o=1,l="",a+=1):(o+=1,l+=j)}let m=i.indexOf(`
`,r);l+=m===-1?i.slice(r):i.slice(r,m);let w=0;l.length>50&&(o<40?l=l.slice(0,50):(w=o-20,l=l.slice(w,o+30)));super(`${e} (line ${a}, column ${o})
  ${l}
`+" ".repeat(o-w+1)+`^
`);this.column=o,this.excerpt=l,this.line=a,this.name="XmlError",this.pos=r}};var f=class extends s{constructor(e,r=""){super();this.name=e,this.content=r}get type(){return s.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(s.prototype.toJSON.call(this),{name:this.name,content:this.content})}};var I="",v=class{constructor(t,e={}){let r=this.document=new g,i=this.r=new E(t);if(this.u=r,this.s=e,this.s.includeOffsets&&(r.start=0,r.end=t.length),i.e("\uFEFF"),this.S(),!this.C())throw this.t("Root element is missing or invalid");for(;this.v(););if(!i.T)throw this.t("Extra content at the end of the document")}h(t,e){return t.parent=this.u,this.s.includeOffsets&&(t.start=this.r.a(e),t.end=this.r.a()),this.u.children.push(t),!0}w(t,e){let{children:r}=this.u,{length:i}=r;if(t=X(t),i>0){let o=r[i-1];if((o==null?void 0:o.type)===s.TYPE_TEXT){let l=o;return l.text+=t,this.s.includeOffsets&&(l.end=this.r.a()),!0}}return this.h(new u(t),e)}A(){let t=Object.create(null);for(;this.n();){let e=this.g();if(!e)break;let r=this.E()&&this.J();if(r===!1)throw this.t("Attribute value expected");if(e in t)throw this.t(`Duplicate attribute: ${e}`);if(e==="xml:space"&&r!=="default"&&r!=="preserve")throw this.t('Value of the `xml:space` attribute must be "default" or "preserve"');t[e]=r}if(this.s.sortAttributes){let e=Object.keys(t).sort(),r=Object.create(null);for(let i=0;i<e.length;++i){let o=e[i];r[o]=t[o]}t=r}return t}J(){let{r:t}=this,e=t.l();if(e!=='"'&&e!=="'")return!1;t.o();let r,i=!1,o=I,l=e==='"'?S:A;t:for(;!t.T;)switch(r=t.j(l),r&&(this.p(r),o+=r.replace(M," ")),t.l()){case e:i=!0;break t;case"&":o+=this.N();continue;case"<":throw this.t("Unescaped `<` is not allowed in an attribute value");case I:break t}if(!i)throw this.t("Unclosed attribute");return t.o(),o}M(){let{r:t}=this,e=t.i;if(!t.e("<![CDATA["))return!1;let r=t.b("]]>");if(this.p(r),!t.e("]]>"))throw this.t("Unclosed CDATA section");return this.s.preserveCdata?this.h(new d(X(r)),e):this.w(r,e)}_(){let{r:t}=this,e=t.i,r=t.D(_);if(!r)return!1;if(this.p(r),t.l(3)==="]]>")throw this.t("Element content may not contain the CDATA section close delimiter `]]>`");return this.w(r,e)}P(){let{r:t}=this,e=t.i;if(!t.e("<!--"))return!1;let r=t.b("--");if(this.p(r),!t.e("-->"))throw t.l(2)==="--"?this.t("The string `--` isn't allowed inside a comment"):this.t("Unclosed comment");return this.s.preserveComments?this.h(new p(X(r)),e):!0}U(){let t=this.r.i,e=this.N();return e?this.w(e,t):!1}Y(){let{r:t}=this,e=t.i;if(!t.e("<!DOCTYPE"))return!1;let r=this.n()&&this.g();if(!r)throw this.t("Expected a name");let i,o;if(this.n()){if(t.e("PUBLIC")){if(i=this.n()&&this.R(),i===!1)throw this.t("Expected a public identifier");this.n()}if(i!==void 0||t.e("SYSTEM")){if(this.n(),o=this.y(),o===!1)throw this.t("Expected a system identifier");this.n()}}let l;if(t.e("[")){if(l=t.D(/\][\x20\t\r\n]*>/),!t.e("]"))throw this.t("Unclosed internal subset");this.n()}if(!t.e(">"))throw this.t("Unclosed doctype declaration");return this.s.preserveDocumentType?this.h(new y(r,i,o,l),e):!0}C(){let{r:t}=this,e=t.i;if(!t.e("<"))return!1;let r=this.g();if(!r)return t.d(e),!1;let i=this.A(),o=!!t.e("/>"),l=new h(r,i);if(l.parent=this.u,!o){if(!t.e(">"))throw this.t(`Unclosed start tag for element \`${r}\``);this.u=l;do this._();while(this.C()||this.U()||this.M()||this.F()||this.P());let a=t.i,m;if(!t.e("</")||!(m=this.g())||m!==r)throw t.d(a),this.t(`Missing end tag for element ${r}`);if(this.n(),!t.e(">"))throw this.t(`Unclosed end tag for element ${r}`);this.u=l.parent}return this.h(l,e)}E(){return this.n(),this.r.e("=")?(this.n(),!0):!1}v(){return this.P()||this.F()||this.n()}g(){return C(this.r.l())?this.r.X(D):I}F(){let{r:t}=this,e=t.i;if(!t.e("<?"))return!1;let r=this.g();if(r){if(r.toLowerCase()==="xml")throw t.d(e),this.t("XML declaration isn't allowed here")}else throw this.t("Invalid processing instruction");if(!this.n()){if(t.e("?>"))return this.h(new f(r),e);throw this.t("Whitespace is required after a processing instruction name")}let i=t.b("?>");if(this.p(i),!t.e("?>"))throw this.t("Unterminated processing instruction");return this.h(new f(r,X(i)),e)}S(){let{r:t}=this,e=t.i;for(this.L();this.v(););if(this.Y())for(;this.v(););return e<t.i}R(){let t=this.r.i,e=this.y();if(e!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(e))throw this.r.d(t),this.t("Invalid character in public identifier");return e}N(){let{r:t}=this;if(!t.e("&"))return!1;let e=t.X(U);if(t.I()!==";")throw this.t("Unterminated reference (a reference must end with `;`)");let r;if(e[0]==="#"){let i=e[1]==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);if(isNaN(i))throw this.t("Invalid character reference");if(!N(i))throw this.t("Character reference resolves to an invalid character");r=String.fromCodePoint(i)}else if(r=J[e],r===void 0){let{ignoreUndefinedEntities:i,resolveUndefinedEntity:o}=this.s,l=`&${e};`;if(o){let a=o(l);if(a!=null){let m=typeof a;if(m!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${m}`);return a}}if(i)return l;throw t.d(-l.length),this.t(`Named entity isn't defined: ${l}`)}return r}y(){let{r:t}=this,e=t.e('"')||t.e("'");if(!e)return!1;let r=t.b(e);if(this.p(r),!t.e(e))throw this.t("Missing end quote");return r}n(){return!!this.r.X(Y)}L(){let{r:t}=this,e=t.i;if(!t.e("<?xml"))return!1;if(!this.n())throw this.t("Invalid XML declaration");let r=!!t.e("version")&&this.E()&&this.y();if(r===!1)throw this.t("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(r))throw this.t("Invalid character in version number");let i,o;if(this.n()&&(i=!!t.e("encoding")&&this.E()&&this.y(),i&&this.n(),o=!!t.e("standalone")&&this.E()&&this.y(),o)){if(o!=="yes"&&o!=="no")throw this.t('Only "yes" and "no" are permitted as values of `standalone`');this.n()}if(!t.e("?>"))throw this.t("Invalid or unclosed XML declaration");return this.s.preserveXmlDeclaration?this.h(new x(r,i||void 0,o||void 0),e):!0}t(t){let{r:e}=this;return new b(t,e.i,e.c)}p(t){let{length:e}=t;for(let r=0;r<e;++r){let i=t.codePointAt(r);if(!N(i))throw this.r.d(-([...t].length-r)),this.t("Invalid character");i>65535&&(r+=1)}}};function X(n){let t=0;for(;(t=n.indexOf("\r",t))!==-1;)n=n[t+1]===`
`?n.slice(0,t)+n.slice(t+1):n.slice(0,t)+`
`+n.slice(t+1);return n}function z(n,t){return new v(n,t).document}return W(Q);})();
parseXml=parseXml.parseXml
//# sourceMappingURL=global.min.js.map
